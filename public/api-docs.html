<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Claw Trust Scores | API Docs</title>
  <meta name="description" content="API docs for Claw Trust Scores. Log events, read trust + behavior scores, run preflight decisions, and export decision history." />
  <link rel="canonical" href="https://clawtrustscores.com/api-docs" />
  <meta property="og:title" content="Claw Trust Scores | API Docs" />
  <meta property="og:description" content="Integration-ready endpoints for trust scoring and preflight decisioning." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://clawtrustscores.com/api-docs" />
  <meta name="twitter:card" content="summary_large_image" />
  <link rel="icon" type="image/png" href="/logo-mark.png" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #f8f4ef;
      --surface: #ffffff;
      --surface-2: #f6efe8;
      --line: #e8ddd1;
      --text: #1e1814;
      --muted: #6f6154;
      --accent: #d4532a;
      --accent-soft: rgba(212, 83, 42, 0.12);
      --ok: #14886f;
      --mono: "IBM Plex Mono", ui-monospace, SFMono-Regular, Menlo, monospace;
      --sans: "Plus Jakarta Sans", ui-sans-serif, system-ui, -apple-system, sans-serif;
    }

    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: var(--sans);
      background: radial-gradient(1200px 500px at 20% -10%, rgba(212,83,42,0.06), transparent), var(--bg);
      color: var(--text);
      line-height: 1.5;
    }

    .wrap { width: min(1020px, 92vw); margin: 0 auto; }

    .topbar {
      border-bottom: 1px solid var(--line);
      background: rgba(248, 244, 239, 0.88);
      backdrop-filter: blur(8px);
      position: sticky;
      top: 0;
      z-index: 20;
    }
    .topbar-inner {
      height: 64px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .brand {
      display: inline-flex;
      align-items: center;
      gap: 9px;
      color: var(--text);
      text-decoration: none;
      font-weight: 800;
      font-size: 1.02rem;
      letter-spacing: -0.2px;
    }
    .brand-mark {
      width: 30px;
      height: 30px;
      object-fit: contain;
      filter: drop-shadow(0 2px 6px rgba(212,83,42,0.16));
    }
    .brand-text span { color: var(--accent); }
    .top-links {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .top-links a {
      text-decoration: none;
      color: var(--muted);
      font-size: 0.9rem;
      font-weight: 600;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid transparent;
    }
    .top-links a:hover {
      color: var(--text);
      border-color: var(--line);
      background: #fff;
    }
    .top-links a.active {
      color: var(--text);
      border-color: #dfc6b5;
      background: #fff;
    }

    main { padding: 26px 0 54px; }
    .step-row {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 10px;
      margin: 12px 0 14px;
    }
    .step {
      background: var(--surface);
      border: 1px solid var(--line);
      border-radius: 12px;
      padding: 12px;
      font-size: 0.88rem;
      color: var(--muted);
    }
    .step strong {
      display: block;
      color: var(--text);
      font-size: 0.93rem;
      margin-bottom: 4px;
    }

    .hero {
      background: var(--surface);
      border: 1px solid var(--line);
      border-radius: 18px;
      padding: 24px;
      box-shadow: 0 8px 32px rgba(21, 16, 11, 0.05);
      margin-bottom: 14px;
    }
    h1 {
      margin: 0;
      font-size: clamp(1.8rem, 3vw, 2.5rem);
      line-height: 1.08;
      letter-spacing: -1px;
    }
    .hero p {
      margin: 10px 0 0;
      color: var(--muted);
      max-width: 760px;
    }
    .base-url {
      margin-top: 14px;
      display: inline-flex;
      align-items: center;
      gap: 9px;
      border: 1px solid var(--line);
      border-radius: 999px;
      padding: 7px 12px;
      background: var(--surface-2);
      color: var(--muted);
      font-size: 0.82rem;
    }
    .base-url code { font-family: var(--mono); color: var(--text); }

    .grid {
      display: grid;
      grid-template-columns: 1.1fr 0.9fr;
      gap: 14px;
      margin-bottom: 14px;
    }

    .card {
      background: var(--surface);
      border: 1px solid var(--line);
      border-radius: 16px;
      padding: 18px;
    }
    .card h2 {
      margin: 0 0 12px;
      font-size: 1.35rem;
      letter-spacing: -0.5px;
    }

    .auth-row {
      display: flex;
      align-items: center;
      gap: 9px;
      padding: 10px 12px;
      border: 1px solid var(--line);
      border-radius: 11px;
      background: #fff;
      font-size: 0.95rem;
      color: var(--muted);
    }
    .auth-row code {
      font-family: var(--mono);
      color: var(--text);
      background: var(--surface-2);
      border-radius: 8px;
      padding: 2px 7px;
    }

    .endpoint-list {
      display: grid;
      gap: 8px;
    }
    .endpoint {
      display: grid;
      grid-template-columns: auto 1fr;
      gap: 10px;
      align-items: center;
      border: 1px solid var(--line);
      border-radius: 11px;
      padding: 9px 10px;
      background: #fff;
    }
    .verb {
      font-family: var(--mono);
      font-size: 0.74rem;
      font-weight: 700;
      letter-spacing: 0.4px;
      border-radius: 7px;
      padding: 4px 7px;
      line-height: 1;
      width: fit-content;
      border: 1px solid transparent;
    }
    .verb.get {
      color: #135f9e;
      border-color: rgba(19,95,158,0.2);
      background: rgba(19,95,158,0.08);
    }
    .verb.post {
      color: #0e7a58;
      border-color: rgba(14,122,88,0.2);
      background: rgba(14,122,88,0.09);
    }
    .endpoint code {
      font-family: var(--mono);
      font-size: 0.82rem;
      color: var(--text);
      background: var(--surface-2);
      border-radius: 8px;
      padding: 3px 7px;
      margin-right: 7px;
      display: inline-block;
    }
    .endpoint span {
      color: var(--muted);
      font-size: 0.9rem;
    }

    .mono {
      font-family: var(--mono);
    }
    .setup-list {
      margin: 0;
      padding-left: 18px;
      color: var(--muted);
      display: grid;
      gap: 6px;
      font-size: 0.9rem;
    }
    pre {
      margin: 0;
      border-radius: 12px;
      border: 1px solid #2c231e;
      background: #171210;
      color: #f7efe6;
      padding: 14px;
      font-size: 0.79rem;
      line-height: 1.65;
      overflow: auto;
    }

    .guides {
      display: grid;
      gap: 10px;
    }
    .guide-link {
      display: flex;
      align-items: center;
      justify-content: space-between;
      text-decoration: none;
      color: var(--text);
      border: 1px solid var(--line);
      border-radius: 11px;
      padding: 12px;
      background: #fff;
      font-weight: 600;
      font-size: 0.93rem;
    }
    .guide-link span:last-child {
      color: var(--accent);
      font-size: 0.8rem;
      font-family: var(--mono);
    }
    .guide-link:hover {
      border-color: #dfc6b5;
      background: #fff9f5;
    }

    .footer-note {
      margin-top: 16px;
      color: var(--muted);
      font-size: 0.84rem;
      text-align: center;
    }
    details.advanced {
      margin-top: 12px;
      border: 1px dashed #d8c8bb;
      border-radius: 12px;
      padding: 10px 12px;
      background: #fffaf6;
    }
    details.advanced > summary {
      cursor: pointer;
      font-weight: 700;
      color: var(--text);
      font-size: 0.92rem;
      list-style: none;
    }
    details.advanced > summary::-webkit-details-marker { display: none; }
    details.advanced > summary::after {
      content: " +";
      color: var(--accent);
      font-family: var(--mono);
    }
    details.advanced[open] > summary::after { content: " -"; }
    .small-note {
      margin-top: 8px;
      color: var(--muted);
      font-size: 0.82rem;
    }
    .mode-switch {
      display: inline-flex;
      gap: 8px;
      margin-bottom: 14px;
      background: #efe5db;
      border: 1px solid #ddc9b8;
      border-radius: 999px;
      padding: 4px;
    }
    .mode-btn {
      border: 0;
      border-radius: 999px;
      padding: 8px 14px;
      font-family: var(--sans);
      font-size: 0.86rem;
      font-weight: 700;
      color: var(--muted);
      background: transparent;
      cursor: pointer;
    }
    .mode-btn.active {
      background: #fff;
      color: var(--text);
      box-shadow: 0 1px 4px rgba(0,0,0,0.08);
    }
    .mode-panel.hidden { display: none; }
    .simple-grid {
      display: grid;
      gap: 12px;
    }
    .simple-steps {
      display: grid;
      gap: 10px;
    }
    .simple-step {
      border: 1px solid var(--line);
      border-radius: 12px;
      background: #fff;
      padding: 12px;
    }
    .simple-step strong {
      display: block;
      font-size: 0.95rem;
      margin-bottom: 4px;
    }
    .simple-step p {
      margin: 0;
      color: var(--muted);
      font-size: 0.9rem;
    }
    .simple-callout {
      border: 1px solid #d8c8bb;
      border-radius: 12px;
      padding: 12px;
      background: #fffaf6;
      color: var(--muted);
      font-size: 0.9rem;
    }
    .try-box {
      border: 1px solid var(--line);
      border-radius: 12px;
      padding: 12px;
      background: #fff;
      display: grid;
      gap: 10px;
    }
    .try-grid {
      display: grid;
      grid-template-columns: 1fr 1fr auto;
      gap: 8px;
      align-items: end;
    }
    .try-field label {
      display: block;
      font-size: 0.78rem;
      color: var(--muted);
      margin-bottom: 5px;
      font-weight: 600;
    }
    .try-field input {
      width: 100%;
      border: 1px solid var(--line);
      border-radius: 10px;
      padding: 10px;
      font-family: var(--mono);
      font-size: 0.82rem;
      color: var(--text);
      background: #fff;
    }
    .try-btn {
      border: 0;
      border-radius: 10px;
      padding: 11px 14px;
      background: var(--text);
      color: #fff;
      font-family: var(--sans);
      font-size: 0.86rem;
      font-weight: 700;
      cursor: pointer;
    }
    .try-btn:disabled { opacity: 0.6; cursor: not-allowed; }
    .try-result {
      margin: 0;
      border-radius: 10px;
      border: 1px solid #2c231e;
      background: #171210;
      color: #f7efe6;
      padding: 12px;
      font-size: 0.78rem;
      min-height: 86px;
      overflow: auto;
      font-family: var(--mono);
      line-height: 1.55;
    }
    .preset-actions {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    .preset-btn {
      border: 1px solid var(--line);
      border-radius: 10px;
      padding: 10px 12px;
      background: #fff;
      color: var(--text);
      font-family: var(--sans);
      font-size: 0.84rem;
      font-weight: 700;
      cursor: pointer;
    }
    .preset-btn:hover {
      border-color: #dfc6b5;
      background: #fff9f5;
    }
    .preset-btn.primary {
      background: var(--text);
      color: #fff;
      border-color: var(--text);
    }
    .preset-btn.primary:hover {
      background: #31261f;
      border-color: #31261f;
    }
    .preset-result {
      margin: 0;
      border-radius: 10px;
      border: 1px solid #2c231e;
      background: #171210;
      color: #f7efe6;
      padding: 12px;
      font-size: 0.78rem;
      min-height: 86px;
      overflow: auto;
      font-family: var(--mono);
      line-height: 1.55;
    }
    .policy-inline {
      display: grid;
      grid-template-columns: 1fr auto auto auto;
      gap: 8px;
      align-items: end;
    }
    .policy-inline .try-field {
      margin: 0;
    }
    .policy-inline input {
      width: 100%;
      border: 1px solid var(--line);
      border-radius: 10px;
      padding: 10px;
      font-family: var(--mono);
      font-size: 0.82rem;
      color: var(--text);
      background: #fff;
    }

    @media (max-width: 900px) {
      .grid { grid-template-columns: 1fr; }
      .step-row { grid-template-columns: 1fr; }
      .top-links { display: none; }
      .try-grid { grid-template-columns: 1fr; }
      .policy-inline { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <header class="topbar">
    <div class="wrap topbar-inner">
      <a class="brand" href="/">
        <img class="brand-mark" src="/logo-mark.png" alt="Claw Trust Scores logo" />
        <span class="brand-text">Claw <span>Trust</span> Scores</span>
      </a>
      <nav class="top-links">
        <a href="/">Home</a>
        <a class="active" href="/api-docs">API Docs</a>
        <a href="/getting-started">Getting Started</a>
        <a href="/changelog">Changelog</a>
        <a href="/status">Status</a>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <section class="hero">
      <h1>API Docs</h1>
      <p>Drop-in trust checks for agent workflows. Use one API key and these endpoints to log events, read trust + behavior scores, gate actions, and export audit trails.</p>
      <div class="base-url">
        <strong>Base URL</strong>
        <code>https://clawtrustscores.com</code>
      </div>
    </section>
    <div class="mode-switch" role="tablist" aria-label="Documentation mode">
      <button class="mode-btn active" id="simpleModeBtn" type="button" role="tab" aria-selected="true">Simple mode</button>
      <button class="mode-btn" id="developerModeBtn" type="button" role="tab" aria-selected="false">Developer mode</button>
    </div>

    <div class="mode-panel" id="simpleModePanel">
      <section class="simple-grid">
        <article class="card">
          <h2>What This Does</h2>
          <p>Before your app sends money, shares keys, or runs risky actions, this service tells you whether the other agent looks safe, risky, or needs review.</p>
        </article>
        <article class="card">
          <h2>3 Steps</h2>
          <div class="simple-steps">
            <div class="simple-step">
              <strong>1. Get your API key</strong>
              <p>Use the signup form on the homepage. You will get a key like <span class="mono">claw_xxx</span>. Put this in your backend/server config as an environment variable (for example <span class="mono">CLAWTRUST_API_KEY</span>).</p>
              <pre><code>CLAWTRUST_API_KEY=INSERT_YOUR_API_KEY_HERE</code></pre>
            </div>
            <div class="simple-step">
              <strong>2. Ask for trust + behavior scores</strong>
              <p>Your backend sends the API call with header <span class="mono">x-api-key</span>. You get trust score (risk), behavior score (reliability), explanation, and <span class="mono">signalQuality</span>.</p>
            </div>
            <div class="simple-step">
              <strong>3. Make a decision</strong>
              <p>Use the score or preflight endpoint to allow, review, or block. Trigger this before risky actions (payment, key share, tool execution).</p>
            </div>
          </div>
        </article>
        <article class="card">
          <h2>Copy/Paste Example</h2>
          <pre><code># .env
CLAWTRUST_API_KEY=INSERT_YOUR_API_KEY_HERE</code></pre>
          <p class="small-note">Use this value in your backend/bot server and send it as <span class="mono">x-api-key</span> on API requests.</p>
        </article>
        <article class="card">
          <h2>Try It Now (No Coding)</h2>
          <div class="try-box">
            <div class="try-grid">
              <div class="try-field">
                <label for="tryApiKey">Your API key</label>
                <input id="tryApiKey" type="password" placeholder="claw_xxx" autocomplete="off" />
              </div>
              <div class="try-field">
                <label for="tryAgentId">Agent ID to check</label>
                <input id="tryAgentId" type="text" value="agent:demo:vendor-1" />
              </div>
              <button class="try-btn" id="tryBtn" type="button">Run check</button>
            </div>
            <pre id="tryResult" class="try-result">Result will appear here.</pre>
          </div>
          <p class="small-note">This calls <span class="mono">GET /v1/score</span> using your key and returns both trust and behavior sections.</p>
        </article>
        <article class="card">
          <h2>Set Trust Policy (No Coding)</h2>
          <div class="try-box">
            <div class="try-field">
              <label for="policyApiKey">Your API key</label>
              <input id="policyApiKey" type="password" placeholder="claw_xxx" autocomplete="off" />
            </div>
            <div class="preset-actions">
              <button class="preset-btn primary" id="presetBalancedBtn" type="button">Apply Balanced (Recommended)</button>
              <button class="preset-btn" id="presetOpenBtn" type="button">Apply Open</button>
              <button class="preset-btn" id="presetStrictBtn" type="button">Apply Strict</button>
              <button class="preset-btn" id="presetWalletBtn" type="button">Apply Wallet Guarded</button>
              <button class="preset-btn" id="presetMoneyBtn" type="button">Apply Money Movement Strict</button>
              <button class="preset-btn" id="policyShowBtn" type="button">Show Current Policy</button>
              <button class="preset-btn" id="guardrailOnBtn" type="button">Enable Verified Guardrail</button>
              <button class="preset-btn" id="guardrailOffBtn" type="button">Disable Verified Guardrail</button>
            </div>
            <div class="policy-inline">
              <div class="try-field">
                <label for="minSignalQualityInput">Minimum signal quality (0-100)</label>
                <input id="minSignalQualityInput" type="number" min="0" max="100" step="1" value="40" />
              </div>
              <button class="preset-btn" id="signalQuality40Btn" type="button">Set 40</button>
              <button class="preset-btn" id="signalQuality70Btn" type="button">Set 70</button>
              <button class="preset-btn primary" id="signalQualityApplyBtn" type="button">Apply value</button>
            </div>
            <pre id="policyResult" class="preset-result">Preset result will appear here.</pre>
          </div>
          <p class="small-note">These actions call <span class="mono">/v1/policy/presets/*</span> and <span class="mono">/v1/policy</span>. Guardrail means sensitive payment/security events must come from verified integrations.</p>
          <p class="small-note">You can also set <span class="mono">minSignalQuality</span> (0-100) in <span class="mono">POST /v1/policy</span> to force review when score quality is too weak.</p>
          <p class="small-note">For high-risk actions, you can require portable credentials by setting <span class="mono">requiredAttestations</span>, <span class="mono">requireAttestationsForRiskAbove</span>, and <span class="mono">attestationFailureDecision</span> in <span class="mono">POST /v1/policy</span>.</p>
        </article>
        <article class="simple-callout">
          If you just want to launch fast, start with: <span class="mono">/v1/events</span>, <span class="mono">/v1/score</span>, <span class="mono">/v1/integrations/clawcredit/preflight</span>, and <span class="mono">/v1/usage</span>.
        </article>
        <article class="simple-callout">
          Where to add your key: in your app/backend env vars, bot server config, or workflow tool secrets (Zapier/Make/n8n). Do not paste API keys into public frontend code or chat messages.
        </article>
      </section>
    </div>

    <div class="mode-panel hidden" id="developerModePanel">
      <section class="step-row">
        <div class="step"><strong>1. Create key</strong>Call <code>POST /v1/users</code> with your email.</div>
        <div class="step"><strong>2. Log + check both scores</strong>Use <code>/v1/events</code> then <code>/v1/score</code>.</div>
        <div class="step"><strong>3. Gate actions</strong>Use preflight to return allow/review/block.</div>
      </section>

      <section class="grid">
        <article class="card">
          <h2>Auth</h2>
          <div class="auth-row">
            Send header <code>x-api-key: YOUR_KEY</code> on all protected endpoints.
          </div>
          <p class="small-note">Most integrations can ignore admin endpoints.</p>
        </article>

        <article class="card">
          <h2>Quick Example</h2>
          <pre><code>curl "https://clawtrustscores.com/v1/score?agentId=agent:demo:vendor-1" \
  -H "x-api-key: YOUR_KEY"</code></pre>
        </article>
      </section>

      <section class="card" style="margin-bottom:14px;">
        <h2>Most Used Endpoints</h2>
        <div class="endpoint-list">
          <div class="endpoint">
            <span class="verb post">POST</span>
            <div><code>/v1/events</code><span>Log trust events</span></div>
          </div>
          <div class="endpoint">
            <span class="verb get">GET</span>
            <div><code>/v1/score?agentId=...&amp;includeTrace=1</code><span>Read trust score + behavior score + explanation (+ optional contribution trace)</span></div>
          </div>
          <div class="endpoint">
            <span class="verb post">POST</span>
            <div><code>/v1/integrations/clawcredit/preflight</code><span>Return allow/review/block using trust + behavior + risk context</span></div>
          </div>
          <div class="endpoint">
            <span class="verb get">GET</span>
            <div><code>/v1/usage</code><span>Current month usage + limits</span></div>
          </div>
          <div class="endpoint">
            <span class="verb get">GET</span>
            <div><code>/v1/audit/decisions?format=json|csv</code><span>Export decision logs</span></div>
          </div>
        </div>
        <details class="advanced">
          <summary>Advanced and account-management endpoints</summary>
          <div class="endpoint-list" style="margin-top:10px;">
          <div class="endpoint">
            <span class="verb get">GET</span>
            <div><code>/v1/plans</code><span>Public plan limits</span></div>
          </div>
          <div class="endpoint">
            <span class="verb get">GET</span>
            <div><code>/v1/integrations/templates</code><span>List supported connector templates (stripe, auth, marketplace, wallet, prediction_market, runtime)</span></div>
          </div>
          <div class="endpoint">
            <span class="verb get">GET</span>
            <div><code>/v1/integrations/readiness?source=...</code><span>Check connector setup readiness (secret + policy hardening)</span></div>
          </div>
          <div class="endpoint">
            <span class="verb post">POST</span>
            <div><code>/v1/integrations/map-event</code><span>Preview mapping from provider event type to trust event type</span></div>
          </div>
          <div class="endpoint">
            <span class="verb get">GET</span>
            <div><code>/v1/policy</code><span>Read per-key trust policy</span></div>
          </div>
          <div class="endpoint">
            <span class="verb get">GET</span>
            <div><code>/v1/policy/presets</code><span>List one-click policy presets (open, balanced, strict, wallet_guarded, money_movement_strict)</span></div>
          </div>
          <div class="endpoint">
            <span class="verb post">POST</span>
            <div><code>/v1/policy/presets/strict</code><span>Apply preset policy to this API key</span></div>
          </div>
          <div class="endpoint">
            <span class="verb post">POST</span>
            <div><code>/v1/policy</code><span>Set per-key trust policy (sources/confidence/signal-quality/overrides)</span></div>
          </div>
          <div class="endpoint">
            <span class="verb post">POST</span>
            <div><code>/v1/attestations</code><span>Issue signed portable attestation for an agent (e.g., connector.stripe.verified)</span></div>
          </div>
          <div class="endpoint">
            <span class="verb get">GET</span>
            <div><code>/v1/attestations?agentId=...&amp;type=...</code><span>List attestations by agent/type/status</span></div>
          </div>
          <div class="endpoint">
            <span class="verb post">POST</span>
            <div><code>/v1/attestations/verify</code><span>Verify attestation token signature + active/revoked/expired status</span></div>
          </div>
          <div class="endpoint">
            <span class="verb post">POST</span>
            <div><code>/v1/attestations/{id}/revoke</code><span>Revoke attestation by ID</span></div>
          </div>
          <div class="endpoint">
            <span class="verb post">DELETE</span>
            <div><code>/v1/policy</code><span>Reset trust policy back to defaults</span></div>
          </div>
          <div class="endpoint">
            <span class="verb post">POST</span>
            <div><code>/v1/keys/rotate</code><span>Rotate current dynamic API key</span></div>
          </div>
            <div class="endpoint">
              <span class="verb post">POST</span>
              <div><code>/v1/keys/revoke</code><span>Revoke current dynamic API key</span></div>
            </div>
            <div class="endpoint">
              <span class="verb post">POST</span>
              <div><code>/v1/integrations/ingest/secret</code><span>Rotate inbound ingest secret (signed webhooks)</span></div>
            </div>
            <div class="endpoint">
              <span class="verb post">POST</span>
              <div><code>/v1/integrations/ingest/events</code><span>Ingest verified external events with HMAC signature</span></div>
            </div>
            <div class="endpoint">
              <span class="verb get">GET</span>
              <div><code>/health</code><span>Service health check</span></div>
            </div>
            <div class="endpoint">
              <span class="verb get">GET</span>
              <div><code>/v1/admin/overview</code><span>Internal metrics overview (admin token)</span></div>
            </div>
          </div>
        </details>
      </section>

      <section class="card" style="margin-bottom:14px;">
        <h2>Connector Quickstart (Stripe/Auth/Marketplace/Wallet/Prediction/Runtime)</h2>
        <ol class="setup-list">
          <li>Run readiness check: <span class="mono">GET /v1/integrations/readiness?source=stripe|auth|marketplace|wallet|prediction_market|runtime</span>.</li>
          <li>Create your ingest secret with <span class="mono">POST /v1/integrations/ingest/secret</span>.</li>
          <li>Preview event mappings with <span class="mono">POST /v1/integrations/map-event</span> before wiring webhooks.</li>
          <li>Send signed events to <span class="mono">POST /v1/integrations/ingest/events</span> with source <span class="mono">stripe</span>, <span class="mono">auth</span>, <span class="mono">marketplace</span>, <span class="mono">wallet</span>, <span class="mono">prediction_market</span>, or <span class="mono">runtime</span>.</li>
        </ol>
        <div style="height:10px"></div>
        <div class="try-box">
          <div class="try-grid">
            <div class="try-field">
              <label for="readinessApiKey">Your API key</label>
              <input id="readinessApiKey" type="password" placeholder="claw_xxx" autocomplete="off" />
            </div>
            <div class="try-field">
              <label for="readinessSource">Source</label>
              <input id="readinessSource" type="text" value="stripe" />
            </div>
            <button class="try-btn" id="readinessBtn" type="button">Run readiness check</button>
          </div>
          <pre id="readinessResult" class="try-result">Readiness result will appear here.</pre>
        </div>
        <div style="height:10px"></div>
        <pre><code># 1) Run readiness check first
curl "https://clawtrustscores.com/v1/integrations/readiness?source=stripe" \
  -H "x-api-key: YOUR_KEY"</code></pre>
        <div style="height:10px"></div>
        <pre><code># 2) Rotate/create ingest secret (store securely)
curl -X POST "https://clawtrustscores.com/v1/integrations/ingest/secret" \
  -H "x-api-key: YOUR_KEY"</code></pre>
        <div style="height:10px"></div>
        <pre><code># 3) Preview mapping before ingesting events
curl -X POST "https://clawtrustscores.com/v1/integrations/map-event" \
  -H "Content-Type: application/json" \
  -H "x-api-key: YOUR_KEY" \
  -d '{"source":"stripe","providerEventType":"payment_intent.payment_failed"}'</code></pre>
        <div style="height:10px"></div>
        <pre><code># 4a) Stripe example payload
curl -X POST "https://clawtrustscores.com/v1/integrations/ingest/events" \
  -H "Content-Type: application/json" \
  -H "x-api-key: YOUR_KEY" \
  -H "x-ingest-timestamp: 1739980000" \
  -H "x-ingest-signature: sha256=YOUR_HEX_SIGNATURE" \
  -d '{"source":"stripe","eventId":"evt_12345","agentId":"agent:vendor:acme","providerEventType":"payment_intent.payment_failed","amountUsd":49.99,"currency":"usd","chargeId":"ch_12345"}'</code></pre>
        <div style="height:10px"></div>
        <pre><code># 4b) Auth provider example payload
curl -X POST "https://clawtrustscores.com/v1/integrations/ingest/events" \
  -H "Content-Type: application/json" \
  -H "x-api-key: YOUR_KEY" \
  -H "x-ingest-timestamp: 1739980000" \
  -H "x-ingest-signature: sha256=YOUR_HEX_SIGNATURE" \
  -d '{"source":"auth","eventId":"auth_evt_9001","agentId":"agent:vendor:acme","providerEventType":"impersonation.detected","ip":"203.0.113.8"}'</code></pre>
        <div style="height:10px"></div>
        <pre><code># 4c) Marketplace example payload
curl -X POST "https://clawtrustscores.com/v1/integrations/ingest/events" \
  -H "Content-Type: application/json" \
  -H "x-api-key: YOUR_KEY" \
  -H "x-ingest-timestamp: 1739980000" \
  -H "x-ingest-signature: sha256=YOUR_HEX_SIGNATURE" \
  -d '{"source":"marketplace","eventId":"mk_evt_1002","agentId":"agent:vendor:acme","providerEventType":"task.abandoned","taskId":"task_1002"}'</code></pre>
        <div style="height:10px"></div>
        <pre><code># 4d) Wallet example payload
curl -X POST "https://clawtrustscores.com/v1/integrations/ingest/events" \
  -H "Content-Type: application/json" \
  -H "x-api-key: YOUR_KEY" \
  -H "x-ingest-timestamp: 1739980000" \
  -H "x-ingest-signature: sha256=YOUR_HEX_SIGNATURE" \
  -d '{"source":"wallet","eventId":"wallet_evt_5001","agentId":"agent:vendor:acme","providerEventType":"wallet.tx.failed","txHash":"0xabc"}'</code></pre>
        <div style="height:10px"></div>
        <pre><code># 4e) Runtime example payload
curl -X POST "https://clawtrustscores.com/v1/integrations/ingest/events" \
  -H "Content-Type: application/json" \
  -H "x-api-key: YOUR_KEY" \
  -H "x-ingest-timestamp: 1739980000" \
  -H "x-ingest-signature: sha256=YOUR_HEX_SIGNATURE" \
  -d '{"source":"runtime","eventId":"rt_evt_2001","agentId":"agent:vendor:acme","providerEventType":"sandbox.escape_detected","runId":"run_2001"}'</code></pre>
        <p class="small-note">Template mapping and supported provider event types are available at <span class="mono">GET /v1/integrations/templates</span>. Use <span class="mono">POST /v1/integrations/map-event</span> to verify exact mapping behavior before sending live events.</p>
      </section>

      <section class="card">
        <h2>Full Guides</h2>
        <pre><code># OpenClaw quick install
npx clawhub@latest install claw-trust-scores

# .env
CLAWTRUST_API_KEY=claw_xxx
CLAWTRUST_BASE_URL=https://clawtrustscores.com</code></pre>
        <p class="small-note">After install, call <span class="mono">get_score</span>, <span class="mono">preflight_payment</span>, and <span class="mono">log_event</span> from your agent workflow.</p>
        <div class="guides">
          <a class="guide-link" href="/getting-started"><span>5-Minute Quickstart</span><span>OPEN</span></a>
          <a class="guide-link" href="https://github.com/oshaea30/Claw-Trust-Scores/tree/main/skills/claw-trust-scores" target="_blank" rel="noopener noreferrer"><span>OpenClaw Skill Wrapper</span><span>OPEN</span></a>
          <a class="guide-link" href="https://github.com/oshaea30/Claw-Trust-Scores/blob/main/USER_GUIDE.md" target="_blank" rel="noopener noreferrer"><span>User Guide</span><span>OPEN</span></a>
          <a class="guide-link" href="https://github.com/oshaea30/Claw-Trust-Scores/blob/main/README.md" target="_blank" rel="noopener noreferrer"><span>README</span><span>OPEN</span></a>
          <a class="guide-link" href="https://github.com/oshaea30/Claw-Trust-Scores/blob/main/TECHNICAL_DOCUMENTATION.md" target="_blank" rel="noopener noreferrer"><span>Technical Documentation</span><span>OPEN</span></a>
          <a class="guide-link" href="/terms"><span>Terms of Service</span><span>OPEN</span></a>
          <a class="guide-link" href="/privacy"><span>Privacy Policy</span><span>OPEN</span></a>
        </div>
      </section>
    </div>
    <p class="footer-note">Need billing setup or plan upgrades? Contact <a href="mailto:info@collocatellc.com">info@collocatellc.com</a>.</p>
  </main>
  <script>
    const simpleBtn = document.getElementById("simpleModeBtn");
    const developerBtn = document.getElementById("developerModeBtn");
    const simplePanel = document.getElementById("simpleModePanel");
    const developerPanel = document.getElementById("developerModePanel");

    function setMode(mode) {
      const simple = mode === "simple";
      simpleBtn.classList.toggle("active", simple);
      developerBtn.classList.toggle("active", !simple);
      simpleBtn.setAttribute("aria-selected", simple ? "true" : "false");
      developerBtn.setAttribute("aria-selected", simple ? "false" : "true");
      simplePanel.classList.toggle("hidden", !simple);
      developerPanel.classList.toggle("hidden", simple);
    }

    simpleBtn.addEventListener("click", () => setMode("simple"));
    developerBtn.addEventListener("click", () => setMode("developer"));

    const tryBtn = document.getElementById("tryBtn");
    const tryApiKey = document.getElementById("tryApiKey");
    const tryAgentId = document.getElementById("tryAgentId");
    const tryResult = document.getElementById("tryResult");
    const policyApiKey = document.getElementById("policyApiKey");
    const policyResult = document.getElementById("policyResult");
    const presetOpenBtn = document.getElementById("presetOpenBtn");
    const presetBalancedBtn = document.getElementById("presetBalancedBtn");
    const presetStrictBtn = document.getElementById("presetStrictBtn");
    const presetWalletBtn = document.getElementById("presetWalletBtn");
    const presetMoneyBtn = document.getElementById("presetMoneyBtn");
    const policyShowBtn = document.getElementById("policyShowBtn");
    const guardrailOnBtn = document.getElementById("guardrailOnBtn");
    const guardrailOffBtn = document.getElementById("guardrailOffBtn");
    const readinessApiKey = document.getElementById("readinessApiKey");
    const readinessSource = document.getElementById("readinessSource");
    const readinessBtn = document.getElementById("readinessBtn");
    const readinessResult = document.getElementById("readinessResult");
    const minSignalQualityInput = document.getElementById("minSignalQualityInput");
    const signalQuality40Btn = document.getElementById("signalQuality40Btn");
    const signalQuality70Btn = document.getElementById("signalQuality70Btn");
    const signalQualityApplyBtn = document.getElementById("signalQualityApplyBtn");

    async function runSimpleCheck() {
      const apiKey = (tryApiKey.value || "").trim();
      const agentId = (tryAgentId.value || "").trim();

      if (!apiKey) {
        tryResult.textContent = "Please enter your API key.";
        return;
      }
      if (!agentId) {
        tryResult.textContent = "Please enter an agent ID.";
        return;
      }

      tryBtn.disabled = true;
      tryBtn.textContent = "Checking...";
      tryResult.textContent = "Running check...";

      try {
        const res = await fetch(`/v1/score?agentId=${encodeURIComponent(agentId)}`, {
          headers: { "x-api-key": apiKey },
          cache: "no-store",
        });
        const data = await res.json();
        tryResult.textContent = JSON.stringify(data, null, 2);
      } catch {
        tryResult.textContent = "Network error while running check.";
      } finally {
        tryBtn.disabled = false;
        tryBtn.textContent = "Run check";
      }
    }

    tryBtn.addEventListener("click", runSimpleCheck);

    async function runReadinessCheck() {
      const apiKey = (readinessApiKey.value || "").trim();
      const source = (readinessSource.value || "").trim().toLowerCase();
      if (!apiKey) {
        readinessResult.textContent = "Please enter your API key.";
        return;
      }
      if (!source) {
        readinessResult.textContent = "Please enter source (stripe, auth, marketplace, wallet, prediction_market, or runtime).";
        return;
      }

      readinessBtn.disabled = true;
      readinessBtn.textContent = "Checking...";
      readinessResult.textContent = "Running readiness check...";
      try {
        const res = await fetch(`/v1/integrations/readiness?source=${encodeURIComponent(source)}`, {
          headers: { "x-api-key": apiKey },
          cache: "no-store",
        });
        const data = await res.json();
        readinessResult.textContent = JSON.stringify(data, null, 2);
      } catch {
        readinessResult.textContent = "Network error while checking readiness.";
      } finally {
        readinessBtn.disabled = false;
        readinessBtn.textContent = "Run readiness check";
      }
    }

    readinessBtn.addEventListener("click", runReadinessCheck);

    async function applyPreset(preset) {
      const apiKey = (policyApiKey.value || "").trim();
      if (!apiKey) {
        policyResult.textContent = "Please enter your API key.";
        return;
      }

      policyResult.textContent = `Applying ${preset} preset...`;
      try {
        const res = await fetch(`/v1/policy/presets/${encodeURIComponent(preset)}`, {
          method: "POST",
          headers: { "x-api-key": apiKey },
          cache: "no-store",
        });
        const data = await res.json();
        policyResult.textContent = JSON.stringify(data, null, 2);
      } catch {
        policyResult.textContent = "Network error while applying preset.";
      }
    }

    async function showCurrentPolicy() {
      const apiKey = (policyApiKey.value || "").trim();
      if (!apiKey) {
        policyResult.textContent = "Please enter your API key.";
        return;
      }

      policyResult.textContent = "Loading current policy...";
      try {
        const res = await fetch("/v1/policy", {
          headers: { "x-api-key": apiKey },
          cache: "no-store",
        });
        const data = await res.json();
        if (data?.policy && Number.isFinite(Number(data.policy.minSignalQuality))) {
          minSignalQualityInput.value = String(Number(data.policy.minSignalQuality));
        }
        policyResult.textContent = JSON.stringify(data, null, 2);
      } catch {
        policyResult.textContent = "Network error while loading policy.";
      }
    }

    async function setGuardrail(enabled) {
      const apiKey = (policyApiKey.value || "").trim();
      if (!apiKey) {
        policyResult.textContent = "Please enter your API key.";
        return;
      }

      policyResult.textContent = enabled
        ? "Enabling verified guardrail..."
        : "Disabling verified guardrail...";
      try {
        const res = await fetch("/v1/policy", {
          method: "POST",
          headers: {
            "x-api-key": apiKey,
            "Content-Type": "application/json",
          },
          cache: "no-store",
          body: JSON.stringify({ requireVerifiedSensitive: enabled }),
        });
        const data = await res.json();
        policyResult.textContent = JSON.stringify(data, null, 2);
      } catch {
        policyResult.textContent = "Network error while updating guardrail setting.";
      }
    }

    async function setMinSignalQuality(value) {
      const apiKey = (policyApiKey.value || "").trim();
      if (!apiKey) {
        policyResult.textContent = "Please enter your API key.";
        return;
      }

      const normalized = Math.max(0, Math.min(100, Number(value)));
      if (!Number.isFinite(normalized)) {
        policyResult.textContent = "minSignalQuality must be a number from 0 to 100.";
        return;
      }

      minSignalQualityInput.value = String(normalized);
      policyResult.textContent = `Setting minSignalQuality to ${normalized}...`;
      try {
        const res = await fetch("/v1/policy", {
          method: "POST",
          headers: {
            "x-api-key": apiKey,
            "Content-Type": "application/json",
          },
          cache: "no-store",
          body: JSON.stringify({ minSignalQuality: normalized }),
        });
        const data = await res.json();
        policyResult.textContent = JSON.stringify(data, null, 2);
      } catch {
        policyResult.textContent = "Network error while updating minSignalQuality.";
      }
    }

    presetOpenBtn.addEventListener("click", () => applyPreset("open"));
    presetBalancedBtn.addEventListener("click", () => applyPreset("balanced"));
    presetStrictBtn.addEventListener("click", () => applyPreset("strict"));
    presetWalletBtn.addEventListener("click", () => applyPreset("wallet_guarded"));
    presetMoneyBtn.addEventListener("click", () => applyPreset("money_movement_strict"));
    policyShowBtn.addEventListener("click", showCurrentPolicy);
    guardrailOnBtn.addEventListener("click", () => setGuardrail(true));
    guardrailOffBtn.addEventListener("click", () => setGuardrail(false));
    signalQuality40Btn.addEventListener("click", () => setMinSignalQuality(40));
    signalQuality70Btn.addEventListener("click", () => setMinSignalQuality(70));
    signalQualityApplyBtn.addEventListener("click", () => setMinSignalQuality(minSignalQualityInput.value));
  </script>
</body>
</html>
